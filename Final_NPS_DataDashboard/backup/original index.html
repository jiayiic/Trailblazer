<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="UTF-8">
    <meta author="Jiayi Chen">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Trailblazer - NPS Data Dashboard</title>

    <!-- This is the Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter"
         viewBox="0 0 16 16">
        <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
    </svg>


    <!-- Mapbox GL CSS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.5.2/mapbox-gl.css" rel="stylesheet">

    <link rel="stylesheet" href="../css/style.css?v=1">
    <link rel="stylesheet" type="text/css"
          media="screen and (max-device-width: 400px)"
          href="tinyScreen.css" />
    <link rel="stylesheet" type="text/css"
          media="screen and (min-width: 400px) and (max-device-width: 600px)"
          href="smallScreen.css" />
</head>

<body>

<!-- Navbar -->

<nav class="navbar navbar-expand-lg bg-dark navbar-dark py-3 fixed-top">
    <div class="container">
        <a class="navbar-brand" href="#">Welcome to Trailblazer - Navigating U.S. National Park with Data-Driven Adventure!</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a href="#learnTheFundamentals" class="nav-link">ABOUT</a>
                </li>
                <li class="nav-item">
                    <a href="#questions" class="nav-link">PLAN YOUR TRIP</a>
                </li>
                <li class="nav-item">
                    <a href="#instructors" class="nav-link">INSPIRATION</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Title -->
<!--<section id="title"-->
<!--         style="padding-top: 50px;">-->


<section id="title" class="bg-dark text-light p-5 p-lg-0 pt-lg-5 pb-lg-5 text-center text-sm-start"
         style="padding-top: 50px;">
    <div class="container">
        <div class="d-sm-flex align-items-center justify-content-between">
            <div style="width: 40%;">
                <h1> Visit
                    <span class="text-warning"> National Parks </span>
                </h1>
                <p class="lead my-4">
                    <strong> Ready to find the national park that calls to your spirit of adventure? </strong>
                </p>
                <p class = "lead my-4">
                    What activities ignite your passion? Hiking, climbing, wildlife photography, or perhaps stargazing?
                    Enter your favorite activity in our search bar and design an unforgettable trip. Which state will
                    be your next destination? Click on a bar to reveal each park's name and start planning today!
                </p>
                <!--                <button type="button" class="btn btn-primary btn-lg“ data-toggle=”modal" data-target="#inputInfo"-->
                <!--                        id="openModalButton">-->
                <!--                    Start Exploring-->
                <!--                </button>-->

                <div class="d-md-flex justify-content-between align-items-center">
                    <div class="input-group news-input">
                        <input type="search" size="0" class="form-control newsletterInput" id="search-input"
                               placeholder="Please enter the activity you like...">
                        <!-- <i class="bi bi-check-circle-fill icon-green position-absolute "></i> -->
                        <input class="btn btn-dark btn-lg showAlert position-relative" id="search-btn" type="submit" value="Search">

                        <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
                            <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path>
                            </symbol>
                        </svg>

                        <div class="alert alert-success d-none align-items-center" role="alert">
                            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:">
                                <use xlink:href="#check-circle-fill"></use>
                            </svg>
                            <div>Successfully subscribed!</div>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    </div>
                </div>




            </div>
            <div class="chart mb-5" id="bar-chart-wrapper">
                <div id="chart1" style="width: 80%"></div>
<!--                    <div style="width: 75%;">-->

<!--                    </div>-->
            <!--        <img src="./images/Iceland1.jpg" class="img-fluid w-50 d-none d-sm-block" alt="ShowCase" loading="lazy">-->
            </div>
    </div>
</section>

<!--<section class="bg-carolina-blue text-light p-5 mt-5">-->
<!--    <div class="d-md-flex justify-content-between align-items-center">-->
<!--        <div class="input-group news-input">-->
<!--            <input type="search" size="0" class="form-control newsletterInput" id="search-input"-->
<!--                   placeholder="Please enter the activity you want to search for...">-->
<!--            &lt;!&ndash; <i class="bi bi-check-circle-fill icon-green position-absolute "></i> &ndash;&gt;-->
<!--            <input class="btn btn-dark btn-lg showAlert position-relative" id="search-btn" type="submit" value="Search">-->

<!--            <svg xmlns="http://www.w3.org/2000/svg" style="display: none">-->
<!--                <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">-->
<!--                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path>-->
<!--                </symbol>-->
<!--            </svg>-->

<!--            <div class="alert alert-success d-none align-items-center" role="alert">-->
<!--                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:">-->
<!--                    <use xlink:href="#check-circle-fill"></use>-->
<!--                </svg>-->
<!--                <div>Successfully subscribed!</div>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</section>-->


<!-- Top 10 Popular Activities -->
<!--<section class="p-5" id="popular-act">-->
<!--    <div class="container">-->
<!--        <div class="row align-items-center justify-content-between">-->
<!--            <div class="chart" id="chart2"></div>-->
<!--            <div class="col-md p-5">-->
<!--                <h2>Top 10 Popular Activities</h2>-->
<!--                <p class="lead">-->
<!--                    Explore the top 10 popular activities around US national parks promises unforgettable adventures,-->
<!--                    creating lasting memories for you and your loved ones. Discover untouched landscapes and hidden-->
<!--                    gems that offer a peaceful escape from the hustle and bustle of city life.-->
<!--                </p>-->

<!--                <p class="lead">-->
<!--                    You can find <b> the total number </b> of parks for each popular activity by clicking the pie chart.-->
<!--                    Also, if you want to hide the activity you do <strong>NOT</strong> like, you can click the legend on the right-->
<!--                    side of the pie chart.-->
<!--                </p>-->
<!--                <a href="" class="btn btn-light mt-3">-->
<!--                    <i class="bi bi-chevron-right"></i> Discover More-->
<!--                </a>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</section>-->

<!--<section class="p-5" id="popular-act">-->
<!--    <div class="container">-->
<!--        <div class="row">-->

<!--            &lt;!&ndash; Pie Chart container &ndash;&gt;-->
<!--            <div class="col-12 col-md-6 chart-container">-->
<!--                <div class="chart" id="chart2"></div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Text content &ndash;&gt;-->
<!--            <div class="col-12 col-md-6 text-container">-->
<!--                <h2>Top 10 Popular Activities</h2>-->
<!--                <p class="lead">-->
<!--                    Explore the top 10 popular activities around US national parks promises unforgettable adventures,-->
<!--                    creating lasting memories for you and your loved ones. Discover untouched landscapes and hidden-->
<!--                    gems that offer a peaceful escape from the hustle and bustle of city life.-->
<!--                </p>-->
<!--                <p class="lead">-->
<!--                    You can find <b>the total number</b> of parks for each popular activity by clicking the pie chart.-->
<!--                    Also, if you want to hide the activity you do <strong>NOT</strong> like, you can click the legend on the right-->
<!--                    side of the pie chart.-->
<!--                </p>-->
<!--                <a href="#" class="btn btn-light mt-3">-->
<!--                    <i class="bi bi-chevron-right"></i> Discover More-->
<!--                </a>-->
<!--            </div>-->



<!--        </div>-->
<!--    </div>-->

<!--&lt;!&ndash;    <container>&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="row">&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-sm-8">col-sm-8</div>&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="col-sm-4">col-sm-4</div>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--&lt;!&ndash;    </container>&ndash;&gt;-->
<!--</section>-->

<section class="p-5" id="popular-act">
    <div class="d-md-flex justify-content-between align-items-center">
        <div class="container text-center">
            <div class="row">
                <div class="col-2">
                </div>
                <div class="col-8">
                    <h2>Top 10 Popular Activities</h2>
                    <p class="lead">
                        Explore the top 10 popular activities around US national parks promises unforgettable adventures,
                        creating lasting memories for you and your loved ones. Discover untouched landscapes and hidden
                        gems that offer a peaceful escape from the hustle and bustle of city life.
                    </p>
                    <p class="lead">
                        You can find <b> the total number </b> of parks for each popular activity by clicking the pie chart.
                        Also, if you want to hide the activity you do <strong>NOT</strong> like, you can click the legend on the right
                        side of the pie chart.
                    </p>
                    <a href="" class="btn btn-light mt-3">
                        <i class="bi bi-chevron-right"></i> Discover More
                    </a>
                    <div class="col">
                    </div>
                </div>
            </div>

            <div class="container pie-center">
                <div class="row">
                    <div class="col-2">
                    </div>
                    <div class="col-9">
                        <div class="chart" id="chart2"></div>
                    </div>
                </div>
                <div class="col">
                </div>
            </div>
        </div>

    </div>









    <!--    <div class="container">-->
    <!--        <div class="row align-items-center justify-content-between">-->
    <!--            <div class="container text-center">-->
    <!--                <div class="row">-->

    <!--                    <div class="col-3">-->
    <!--                    </div>-->
    <!--                    <div class="col-6">-->
    <!--                        <div class="col-md p-5">-->
    <!--                            <h2>Top 10 Popular Activities</h2>-->
    <!--                            <p class="lead">-->
    <!--                                Explore the top 10 popular activities around US national parks promises unforgettable adventures,-->
    <!--                                creating lasting memories for you and your loved ones. Discover untouched landscapes and hidden-->
    <!--                                gems that offer a peaceful escape from the hustle and bustle of city life.-->
    <!--                            </p>-->

    <!--                            <p class="lead">-->
    <!--                                You can find <b> the total number </b> of parks for each popular activity by clicking the pie chart.-->
    <!--                                Also, if you want to hide the activity you do <strong>NOT</strong> like, you can click the legend on the right-->
    <!--                                side of the pie chart.-->
    <!--                            </p>-->
    <!--                            <a href="" class="btn btn-light mt-3">-->
    <!--                                <i class="bi bi-chevron-right"></i> Discover More-->
    <!--                            </a>-->
    <!--                        </div>-->
    <!--                    </div>-->
    <!--                    <div class="col-3">-->
    <!--                    </div>-->
    <!--                </div>-->

    <!--            <div class="container pie-center">-->
    <!--                    <div class="row">-->
    <!--                        <div class="col-2">-->
    <!--                        </div>-->
    <!--                        <div class="col-8">-->
    <!--                            <div class="chart" id="chart2"></div>-->
    <!--                        </div>-->

    <!--                        <div class="col-2">-->
    <!--                        </div>-->

    <!--                    </div>-->
    <!--                </div>-->


    <!--        </div>-->
    <!--        </div>-->
    <!--    </div>-->
</section>


<!--<section class="bg-carolina-blue text-light p-5 mt-5">-->
<!--    <div class="d-md-flex justify-content-between align-items-center">-->
<!--        <div class="input-group news-input">-->
<!--            <input type="search" size="0" class="form-control newsletterInput" id="search-input"-->
<!--                   placeholder="Please enter the activity you like...">-->
<!--            &lt;!&ndash; <i class="bi bi-check-circle-fill icon-green position-absolute "></i> &ndash;&gt;-->
<!--            <input class="btn btn-dark btn-lg showAlert position-relative" id="search-btn" type="submit" value="Search">-->

<!--            <svg xmlns="http://www.w3.org/2000/svg" style="display: none">-->
<!--                <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">-->
<!--                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path>-->
<!--                </symbol>-->
<!--            </svg>-->

<!--            <div class="alert alert-success d-none align-items-center" role="alert">-->
<!--                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:">-->
<!--                    <use xlink:href="#check-circle-fill"></use>-->
<!--                </svg>-->
<!--                <div>Successfully subscribed!</div>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</section>-->




<!-- Modal -->
<div class="modal fade" id="inputInfo" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">

<!--                button of Start Exploring -->
<!--                <h5 class="modal-title" id="openModalButton">Start Exploring</h5>-->
<!--                <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                    <span aria-hidden="true">&times;</span>-->
<!--                </button>-->

<!--                <div class="input-group news-input">-->
<!--                    <input type="search" size="0" class="form-control newsletterInput" id="search-input"-->
<!--                           placeholder="Please enter the activity you want to search for...">-->
<!--                    &lt;!&ndash; <i class="bi bi-check-circle-fill icon-green position-absolute "></i> &ndash;&gt;-->
<!--                    <input class="btn btn-dark btn-lg showAlert position-relative" id="search-btn" type="submit" value="Search">-->

<!--                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">-->
<!--                        <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">-->
<!--                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path>-->
<!--                        </symbol>-->
<!--                    </svg>-->

<!--                    <div class="alert alert-success d-none align-items-center" role="alert">-->
<!--                        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:">-->
<!--                            <use xlink:href="#check-circle-fill"></use>-->
<!--                        </svg>-->
<!--                        <div>Successfully subscribed!</div>-->
<!--                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>-->
<!--                    </div>-->
<!--                </div>-->
                <section class="bg-carolina-blue text-light p-5 mt-5">
                    <div class="d-md-flex justify-content-between align-items-center">
                        <div class="input-group news-input">
                            <input type="search" size="0" class="form-control newsletterInput" id="search-input"
                                   placeholder="Please enter the activity you want to search for...">
                            <!-- <i class="bi bi-check-circle-fill icon-green position-absolute "></i> -->
                            <input class="btn btn-dark btn-lg showAlert position-relative" id="search-btn" type="submit" value="Search">

                            <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
                                <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path>
                                </symbol>
                            </svg>

                            <div class="alert alert-success d-none align-items-center" role="alert">
                                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:">
                                    <use xlink:href="#check-circle-fill"></use>
                                </svg>
                                <div>Successfully subscribed!</div>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        </div>
                    </div>
                </section>



            </div>
            <div class="modal-body">
                <p class="lead">Fill out this Form and we will get back to you!</p>
                <form>
                    <div class="mb-3">
                        <label for="first-name" class="col-form-label">
                            First Name:
                        </label>
                        <input type="text" class="form-control" id="first-name">
                    </div>
                    <div class="mb-3">
                        <label for="first-name" class="col-form-label">
                            Last Name:
                        </label>
                        <input type="text" class="form-control" id="first-name">
                    </div>
                    <div class="mb-3">
                        <label for="first-name" class="col-form-label"> Email: </label>
                        <input type="text" class="form-control" id="first-name">
                    </div>
                    <div class="mb-3">
                        <label for="first-name" class="col-form-label"> Phone: </label>
                        <input type="text" class="form-control" id="first-name">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </div>
</div>



<!-- Iceland Video 2 - to update -->
<section class="p-5 bg-dark text-light" id="learn">
    <div class="container">
        <div class="row align-items-center justify-content-between">
<!--            <div class="col-md p-5">-->
<!--                <h2>Dear Iceland, you’re the coolest.</h2>-->
<!--                <p class="lead">-->
<!--                    Icy glares from vampires are far icier than icy glares from people and when the vampire-->
<!--                    giving you an icy glare is originally from Iceland, you’re confronted with the archetypal origin of-->
<!--                    the term,-->
<!--                    and you shouldn’t be surprised if your core body temperature drops a few degrees. – Kevin Hearne.-->
<!--                </p>-->
<!--                <a href="" class="btn btn-light mt-3">-->
<!--                    <i class="bi bi-chevron-right"></i> Read More-->
<!--                </a>-->
<!--            </div>-->
            <!--        <div class="video-container">-->
            <!-- <img src="./images/react.svg" class="img-fluid" alt=""> -->
            <!-- <iframe src="https://www.youtube.com/embed/Pbzn79TSRO0" frameborder="0" class = "img-fluid" allowfullscreen alt=""></iframe> -->
            <!--          <iframe width="460" height="315" src="https://www.youtube.com/embed/Pbzn79TSRO0" frameborder="0" allowfullscreen></iframe>-->

            <!--        </div>-->
            <div class="p-5 table-wrapper">
                <table id="table" class="light" style="width: 100%;">
                    <thead>
                    <tr>
                        <th>Park</th>
                        <th>Full Name</th>
                        <th>State</th>
                        <th>Designation</th>
                        <th>Activity</th>
                    </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter -->
<section id="Newsletter" class="bg-carolina-blue text-light p-5">
    <div class="d-md-flex justify-content-between align-items-center">
        <h3 class="mb-3m mb-md-0">Sign Up For Our Newsletter</h3>
        <n class="input-group news-input">
            <input type="email" size="0" class="form-control newsletterInput" placeholder="Enter email...">
            <!-- <i class="bi bi-check-circle-fill icon-green position-absolute "></i> -->
            <input class="btn btn-dark btn-lg showAlert position-relative" type="submit" disabled="">

            <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
                <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"></path>
                </symbol>
            </svg>

            <div class="alert alert-success d-none align-items-center" role="alert" id="subscribed">
                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:">
                    <use xlink:href="#check-circle-fill"></use>
                </svg>
                <div>Successfully subscribed!</div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </n>
    </div>
</section>

<!-- Questions -->


<!-- Contact and Map -->

<!-- Footer -->
<section id="footer" class="p-5 bg-dark text-white text-center position-relative">
    <div class="container">
        <p class="bottom">Copyright © 2023 Trailblazer</p>
<!--        <p class="bottom">Photos & videos from <a href="https://www.pexels.com/" class="link-color">Pexels</a>-->
<!--            and text content from <a href="https://www.itsallbee.com/2020/03/captions-quotes-about-iceland/"-->
<!--                                     class="link-color">Itsallbee</a>.-->
<!--        </p>-->
        <a href="#" class="position-absolute bottom-0 end-0 p-5">
            <i class="bi bi-arrow-up-circle h1 circle-color"></i>
            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="50" fill="currentColor"
                 class="bi bi-arrow-up-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/>
            </svg>
        </a>

    </div>
</section>

<!-- This is the Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
        integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
        crossorigin="anonymous"></script>

<!-- Mapbox script -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.css" rel="stylesheet"/>


<link rel="stylesheet" href="../css/jquery.dataTables.min.css">
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="../js/d3.v5.min.js"></script>
<script type="text/javascript" src="../js/echarts.min.js"></script>


<script type="text/javascript">


    const apiKey = 'mKBejuAfWI582qtAjjGa07FKwzAksZcyTJY9rta9'; // Replace with your actual API key
    const endpoint = 'https://developer.nps.gov/api/v1/activities/parks'; // Replace with the API endpoint you want to access

    // Create headers object with API key
    const headers = {
        'X-Api-Key': apiKey,
    };

    let originData = []

    // Make a GET request to the API
    fetch(endpoint, {
        method: 'GET',
        headers: headers,
    })
        .then((response) => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
        })
        .then((data) => {

            // Important: Now you can work with the 'data' variable, which contains the API response as a JavaScript object
            console.log(data);
            originData = data.data
            renderPieChart(originData.map(item => {
                return {
                    name: item.name,
                    value: item.parks.length
                }
            }))
            renderBarChart(originData)
            renderTable(originData)
        })
        .catch((error) => {
            if (error instanceof TypeError) {
                console.error('Network error:', error.message);
            } else {
                console.error('An error occurred:', error.message);
            }
        });


    function renderPieChart(dataset) {
        let myChart = echarts.init(document.getElementById('chart2'))

        // Customize the color of each pie chart sector
        const datasetWithColors = dataset.map(item => {
            if (item.value > 300) {
                item.itemStyle = { color: '#d2f1dc' }; // Number of Parks > 300
            } else if (item.value > 250) {
                item.itemStyle = { color: '#98c39a' }; // Number of Parks > 200
            } else if (item.value > 200) {
                item.itemStyle = { color: '#879d95' }; // Number of Parks > 150
            } else {
                item.itemStyle = { color: '#516850' }; // 其他情况
            }
            return item;
        });

        //
        const legendData = [
            { name: 'Number of Parks > 200', icon: 'circle', textStyle: { color: '#C6D8B7' } },
            { name: 'Number of Parks > 100', icon: 'circle', textStyle: { color: '#718D74' } },
            { name: 'Other', icon: 'circle', textStyle: { color: '#CBCCC7' } },
        ];

        // Customize Pie colors
        const customColors = ['#718D74', '#84A786', '#9DBDA5','#A5B497','#BBD1AA',
                            '#C6D8B7','#CFD5B8', '#D3E2C3','#E0E3D0','#CBCCC7',];

        myChart.setOption({
            tooltip: {
                trigger: 'item',
                // formatter: '{a} <br/>{b} : {c} ({d}%)'

            },
            color: customColors,


            title: {
                text: 'Activities', // The title text
                subtext: 'Try to click the legend!', // A subtitle for additional information (optional)
                left: '85%', // Position the title in the center
                // top: 20, // Distance from the top of the container
                textStyle: {
                    color: '#333', // Choose a color for the text
                    fontWeight: 'bold', // Optionally make the text bold
                    fontSize: 16 // Choose an appropriate font size
                }
            },

            legend: {
                // Place the legend at the bottom center
                orient: 'vertical',
                left: '85%',
                bottom: '10%', // Adjust the position of the legend to 5% from the bottom of the container
                // other legend configuration...
                formatter: function (name) {
                    let item = legendData.find(item => item.name.includes(name));
                    return item ? item.name : name;
                },


            },
            // Set the color for the pie chart sectors
            color: ['#718D74', '#C6D8B7', '#CBCCC7'],




            series: [
                {
                    name: 'Number of Parks',
                    type: 'pie',
                    radius: '50%',
                    // center: ['40%', '50%'],
                    data: dataset.sort((a, b) => b.value - a.value).slice(0, 10),
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        })
    }


    const tooltip = d3.select("body")
        .append("div")
        .attr("id", "tooltip")
        .style("opacity", 0)
        .style("position", "absolute")
        .style("background-color", "white")
        .style("border", "1px solid #ccc")
        .style("padding", "5px")
        .style("border-radius", "10px")
        .style(" pointer-events", "none");

    function renderBarChart(dataset) {
        const maxHeight = 400;
        const maxWidth = 600;
        const colorArray = ['#718D74', '#84A786', '#9DBDA5','#A5B497','#BBD1AA',
                            '#C6D8B7','#CFD5B8', '#D3E2C3','#E0E3D0','#CBCCC7',];
        let result = []
        const margin = {
            top: 20,
            right: 60,
            bottom: 60,
            left: 60,
        };
        dataset.forEach(item => {
            item.parks.forEach(park => {
                park.states.split(',').forEach(state => {
                    let findItem = result.find(el => el.name === state)
                    if (findItem) {
                        findItem.value++
                        findItem.parks.add(park.name)
                    } else {
                        const parks = new Set()
                        parks.add(park.name)
                        result.push({
                            name: state,
                            value: 1,
                            parks
                        })
                    }
                })
            })
        })
        result = result.sort((a, b) => b.value - a.value).slice(0, 10)
        // Define the width of each bar in the bar chart
        const barWidth = 20;

        // Create an array to hold tick values for x-axis
        const xTicks = new Array(result.length + 1);
        for (let i = 0; i <= result.length; i++) {
            xTicks[i] = i;
        }

        // Functions to extract 'x' and 'y' values for scaling
        const getX = (d) => d.name;
        const getY = (d) => d.value;

        // Create a point scale for x-axis using D3
        const scaleX = d3.scalePoint()
            .domain(result.map(getX)) // Set the domain based on 'name' data
            .range([0, maxWidth - margin.left - margin.right]) // Set the range based on available width
            .padding(0.2); // Add padding between the bars

        // Create a linear scale for y-axis using D3
        const scaleY = d3.scaleLinear()
            .domain([0, d3.max(result, getY)]) // Set the domain based on 'value' data
            .range([maxHeight - margin.top - margin.bottom, 0]); // Set the range within the available height

        // Remove any existing SVG elements from the 'chart1' div
        document.querySelectorAll('#chart1>svg').forEach(item => {
            item.remove();
        });

        // Create an SVG element for the bar chart and set its width and height
        const svg = d3.select('#chart1')
            .append('svg')
            .attr('width', maxWidth)
            .attr('height', maxHeight);

        // Create bars in the bar chart for each data point
        const bar = svg.selectAll('rect')
            .data(result)
            .enter()
            .append('rect')
            .attr('x', (d) => scaleX(getX(d)) + margin.left - barWidth / 2) // Set x position of the bars
            .attr('y', (d) => scaleY(getY(d)) + margin.top) // Set y position of the bars
            .attr('width', barWidth) // Set the width of each bar
            .attr('height', (d) => maxHeight - margin.bottom - margin.top - scaleY(getY(d))) // Set the height of each bar
            .attr('fill', (d, i) => colorArray[i % colorArray.length]) // Apply color to the bars
            .on("mouseover", function (d) {
                tooltip.html(Array.from(d.parks).join('<br>')); // Display parks' names on hover
                tooltip.style("opacity", 1); // Set tooltip opacity to make it visible
            })
            .on("mousemove", function (d) {
                tooltip.style("left", (d3.event.pageX + 10) + "px") // Adjust tooltip position according to mouse movement
                    .style("top", (d3.event.pageY) + "px");
            })
            .on("mouseout", function (d) {
                // tooltip.style("opacity", 0); // Hide the tooltip on mouseout
            });

        // Create and append the y-axis to the SVG chart
        const axisLeft = d3.axisLeft(scaleY);
        svg.append('g')
            .attr('transform', `translate(${margin.left}, ${margin.top})`)
            .call(axisLeft);

        // Create and append the x-axis to the SVG chart
        const axisBottom = d3.axisBottom(scaleX);
        svg.append('g')
            .attr('transform', `translate(${margin.left}, ${maxHeight - margin.bottom})`)
            .call(axisBottom);

        // Label the x-axis for 'State'
        svg.append("text")
            .attr("x", maxWidth / 2)
            .attr("y", maxHeight - 5)
            .attr("fill", '#fff')
            .style("text-anchor", "middle")
            .text("State")

        // Label the y-axis for 'Number of Parks'
        svg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("x", 0 - maxHeight / 2)
            .attr("y", 10)
            .attr("fill", '#fff')
            .style("text-anchor", "middle")
            .text("Number of Parks")
            .style("text-anchor", "middle")

    }

    $('#bar-chart-wrapper').mouseout(function () {
        tooltip.style("opacity", 0);
    })

    $('#search-btn').click(function () {
        let searchContent = $('#search-input').val().toLowerCase()
        let searchList = originData.filter(item => item.name.toLowerCase().indexOf(searchContent) !== -1)
        console.log(searchList)
        renderBarChart(searchList)
        // renderTable(searchList)
    })

    $('#search-input').keypress(function (e) {
        if (e.which === 13) { // 13 for Enter button on keyboard
            search();
        }
    });

    function search() {
        let searchContent = $('#search-input').val().toLowerCase();
        let searchList = originData.filter(item => item.name.toLowerCase().indexOf(searchContent) !== -1);
        console.log(searchList);
        renderBarChart(searchList);
        // renderTable(searchList);
    }

    // Press the button to search
    $('#search-btn').click(search);


    let table = new DataTable('#table', {
        processing: true,
        // searching: false,
        paging: true,
        pageLength: 10,
        serverSide: false
    });

    function renderTable(searchList) {
        let tableResult = []
        searchList.forEach(item => {
            tableResult.push(...item.parks.map(el => {
                return {
                    activity: item.name,
                    ...el
                }
            }))
        })

        table.destroy();
        table = $('#table').DataTable({
            processing: true,
            // searching: false,
            paging: true,
            data: tableResult.map(item => [item.name, item.fullName, item.states, item.designation, item.activity]),
            pageLength: 10,
            serverSide: false,
            columns: [
                { title: "Park", width: "40%" }, // Adjust the width as needed
                { title: "Full Name", width: "40%" },
                { title: "State", width: "1%" },
                { title: "Designation", width: "50%" },
                { title: "Activity", width: "50%" },
            ]
        })
    }

    $('#search-btn').click(function () {
        let searchContent = $('#search-input').val().toLowerCase()
        let searchList = originData.filter(item => item.name.toLowerCase().indexOf(searchContent) !== -1)
        console.log(searchList)
        renderBarChart(searchList)
        // renderTable(searchList)
    })


</script>

</body>

</html>
